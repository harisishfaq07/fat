.remote
  = form_for(@user, html: one_submit_only, remote: true) do |f|
    = link_to_close edit_user_path(@user)

    = f.error_messages object_name: t('user')

    .section
      %table
        %tr
          %td
            .label.top #{t :first_name}:
            = f.text_field :first_name
          %td= spacer
          %td
            .label.top #{t :last_name}:
            = f.text_field :last_name
        %tr
          %td
            .label.top #{t :Username}:
            = f.text_field :username
          %td= spacer
          %td
            .label.top #{t :job_title}:
            = f.text_field :title
        %tr
          %td
            .label.top #{t :company}:
            = f.text_field :company

    .subtitle #{t :contact_info}
    .section
      %table
        %tr
          %td{ colspan: 3 }
            .label.top.req #{t :email}:
            = f.email_field :email , readonly: true , style: "background-color: #D3D3D3; border: none; border-radius: 3px"
          %td= spacer
          %td{ colspan: 3 }
            .label.top #{t :alt_email}:
            = f.text_field :alt_email ,{:class => "alt_email"}
            %div.responce
            %button.create_alt_email Add
            - if current_user.alt_emails.count > 0
              = link_to "View All Alternate emails" , view_alt_email_alt_emails_path
            
        %tr
          %td{ colspan: 3 }
            .label #{t :phone}:
            = f.text_field :phone
          %td= spacer
          %td{ colspan: 3 }
            .label #{t :mobile}:
            = f.text_field :mobile 
    .subtitle{:class => "im"} #{t :"Add Instant Messaging"}
    %div{:class => "showim"}
      .section
        %table  
          %tr
            %td
              .label #{t :aim}:
              = f.text_field :aim, style: "width:112px"
            %td= spacer
            %td
              .label #{t :yahoo}:
              = f.text_field :yahoo, style: "width:112px"
            %td= spacer
            %td
              .label #{t :google}:
              = f.text_field :google, style: "width:112px"
            %td= spacer
            %td
              .label #{t :Telegram}:
              = f.text_field :telegram, style: "width:112px"
    .subtitle{:class => "vc"} #{t :"Add Video Calling"}
    %div{:class => "showvc"}
      .section
        %table  
          %tr
            %td
              .label #{t :Zoom}:
              = f.text_field :zoom, style: "width:112px"
            %td= spacer
            %td
              .label #{t :"Google Duo"}:
              = f.text_field :google_duo, style: "width:112px"
            %td= spacer
            %td
              .label #{t :Emo}:
              = f.text_field :emo, style: "width:112px"
            %td= spacer
            %td
              .label #{t :skype}:
              = f.text_field :skype, style: "width:112px"
    .buttonbar
      = f.submit t :Update  
      #{t :or}
      = link_to_cancel edit_user_path(@user)

  = hook(:profile_user_bottom, self)
%br

:javascript
     
     $(document).ready(function(){
      $(".showim").hide();
      $(".showvc").hide();
      $(".im").click(function(){
        $(".showim").slideToggle();
      });
      $(".vc").click(function(){
        $(".showvc").slideToggle();
      });

      $(".create_alt_email").click(function(e){
        e.preventDefault();
        var get_alt_email = $(".alt_email").val();
        send_data = {alt_email: get_alt_email }
      $.ajax({
        type: 'POST',
        url: '/users/create_alt_email',
        beforeSend: function(xhr) {xhr.setRequestHeader("X-CSRF-Token", $("meta[name='csrf-token']").attr("content"))},
        data: send_data,
        dataType: 'script',
        success: function(data) {
        console.log("okay")
        }
      });
      })

      $(".view_alt_email").click(function(e){
        e.preventDefault();
      })
     })
      
     
 
